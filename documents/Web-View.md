# Webサイトが表示されるまでの仕組み

## ブラウザにWebサイトが表示される仕組みの概要

ブラウザにURLを入力してエンターキーを押すと、そのWebサイトを画面上に表示することができる。  

表示手順は下記のようになっている。  

<br>

1. ブラウザにURLを入力しエンターキーを押すと、 **クライアント(サービスを使う側のコンピュータ)** から **サーバ(サービスを提供する側のコンピュータ)** に対して、「このページをください」というリクエストが送信される。

2. リクエストを受け取ったサーバは、リクエストに対応するレスポンスを送り返す。このレスポンスの中にHTMLが含まれている。

3. 送り返されたHTMLを受け取ったブラウザは、そのHTMLの情報を解析して、画面上にWebサイトを表示する。

<br>

上記の手順はあくまで概要レベルの話であり、よりWebサイト表示の原理を理解していきたいので、さらに深ぼっていく！！  

## 用語解説

Webサイト表示の原理を理解するのに重要な項目として、下記の５つのキーワードがある。

- **IPアドレス**

- **ドメイン**

- **Webブラウザ**

- **Webサーバー**

- **DNS**

<br>

### IPアドレス

IP (インターネットプロトコル)とは、**インターネットに接続されたコンピュータ同士がデータをやりとりするためにデータ通信の方法を定めた規約** のことである。  

IPアドレスとは、 インターネットなどのIPネットワークに接続する端末や機器に割り当てられる **一意の識別番号** である。  

![IPAdresss](https://raw.githubusercontent.com/Yuisei-Maruyama/MyPortfolio/main/documents/IPAddress.webp)

クライアント端末からIPアドレスを指定して特定の送信先に要求したいデータを送ることができ、自身もそのIPアドレスを所有していることで、要求したデータを送り返してもらうことができる。  

IPアドレスは2種類あり、それぞれ IPv4 と IPv6 と呼ばれている。  

| 種類 | 例 |
| --- | --- |
| IPv4 | 153.126.173.109 |
| IPv6 | 2001:db8::123:0:ab |

<!--rehype:style=color: black;-->

> IPv4 とは？

インターネットに接続されたコンピュータにはそれぞれのコンピュータを識別するためのIPアドレスと呼ばれる固有の番号が割り当てられる。  

IPv4ではこのIPアドレスを**32ビット**のデータとして表現する。  

IPv4のアドレス総数は **0~255の数字をドット区切りで4つ並べたもの** なので **256×256×256×256個**、つまり **42億9496万7296個** である。  

上記の計算では、最大約43億台のコンピュータがインターネットに接続できることになる。  

しかし、インターネットの普及に伴い、世界の人口である 約80億人 が利用するには、到底数が足りない！！  

そこで、**IPv6** が生まれた。

> IPv6 とは？

IPv6ではIPアドレスを128ビットのデータとして表現する。  

そのためアドレス総数は **3.4×10の38乗個**、つまり **約340澗（かん）個** となり、これは事実上無限の数を設定できることを意味する。

<br>

### ドメイン

ドメインは英語で「領土」「領域」「範囲」を意味し、Webの世界ではWebサイトや、サーバーなどの機器を識別するためのものである。  

インターネットではIPアドレスによりデータの送受信先を指定するが、数値だけで表現されるIPアドレスは人間にとって扱いにくいものである。  

そのため、**IPアドレスを人間が認識しやすいようにアルファペットで表現する** ために「ドメイン」が生まれたのである。  

上記で記述した通り、ドメインは **IPアドレスと紐付いているため、インターネット上に1つと決められていて、ほかに同じ名前は存在しない**。  

![Domain](https://raw.githubusercontent.com/Yuisei-Maruyama/MyPortfolio/main/documents/Domain.webp)

まとめると、下記のようになる。  

| 名称 | 概要 | 例 |
| --- | --- | --- |
| ドメイン名 | 人間向けの住所 | https://xxx-inc.com |
| IPアドレス | コンピューター向けの識別番号 | 126.255.255.255 |

<!--rehype:style=color: black;-->

上の表のように、Webサイトの住所はコンピューター向けの「IPアドレス」と、人間向けの「ドメイン名」の2種類が存在している。  

ただ「ドメイン名」だけで「対象のIPアドレス」を見つけることはできない。  

そこで、**DNS** という **ドメインからサーバを導き出すことができる仕組み** が用意されている。  

### DNS

**DNS(Domain Name System)** とは、**IPアドレスとドメイン名を連結させるシステム** である。  

また、DNSを実行する機器を **DNSサーバ** と呼ぶ。  

DNSを実行するDNSサーバには「どのIPアドレスとドメイン名が紐付いているか」という、IPアドレスの一覧表が入っている。  

そこで、クライアントは **DNSサーバーへ対して「ドメイン名に紐づくIPアドレス」を問い合わせ** を行うことで「対象のIPアドレス」を取り出せるという仕組みになっている。  

![DNS](https://raw.githubusercontent.com/Yuisei-Maruyama/MyPortfolio/main/documents/Dns.webp)


## Webサイト表示の仕組み(詳細版)

| 順番 | 　どこからどこへ | 処理内容 |
| --- | --- | --- |
| 1 | ユーザ → ブラウザ | URL（ドメイン名）を入力する |
| 2 | クライアント → DNSサーバ | IPアドレスを問い合わせ（リクエスト）する |
| 3 | DNSサーバ → クライアント | 該当のIPアドレスを返答（レスポンス）する |
| 4 | クライアント → 該当のWebサーバー | Webサイトのデータを要求する |
| 5 | Webサーバー → クライアント | Webサイトのデータを送信する |
| 6 | ブラウザ | Webサイトが表示される |

<!--rehype:style=color: black;-->

DNSサーバーには、一度問い合わせた情報が保存されるDNSキャッシュサーバーがある。  

そのため、**2回目以降はキャッシュサーバからレスポンスが来るため より速く**処理される。  
